# Staging Environment Configuration
# This file contains staging-specific environment variables

# Application
NODE_ENV=staging
APP_NAME=Zapin WhatsApp SaaS (Staging)
APP_VERSION=1.0.0
APP_URL=https://staging.zapin.app
API_URL=https://api-staging.zapin.app
PORT=8080
API_PORT=3001

# Security
JWT_SECRET=${JWT_SECRET}
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d
ENCRYPTION_KEY=${ENCRYPTION_KEY}
SESSION_SECRET=${SESSION_SECRET}

# Database
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_SIZE=20
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_IDLE_TIMEOUT=600000
DATABASE_SSL=true

# Redis
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_KEY_PREFIX=zapin:staging:
REDIS_CONNECTION_TIMEOUT=5000
REDIS_TLS_ENABLED=true

# Evolution API
EVOLUTION_API_URL=${EVOLUTION_API_URL}
EVOLUTION_API_KEY=${EVOLUTION_API_KEY}
EVOLUTION_API_TIMEOUT=30000
EVOLUTION_API_RETRY_ATTEMPTS=3
EVOLUTION_API_RETRY_DELAY=1000

# Logging
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=true
LOG_MAX_FILES=10
LOG_MAX_SIZE=50MB

# Monitoring & Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# CORS
CORS_ENABLED=true
CORS_ORIGIN=https://staging.zapin.app,https://api-staging.zapin.app
CORS_CREDENTIALS=true

# File Upload
UPLOAD_MAX_SIZE=25MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,video/mp4
UPLOAD_DESTINATION=./uploads/staging

# Email (Staging - use SendGrid or similar)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
EMAIL_FROM=staging@zapin.app
EMAIL_FROM_NAME=Zapin Staging

# Webhooks
WEBHOOK_SECRET=${WEBHOOK_SECRET}
WEBHOOK_TIMEOUT=15000
WEBHOOK_RETRY_ATTEMPTS=5

# Feature Flags
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=false
FEATURE_ANALYTICS=true
FEATURE_RATE_LIMITING=true

# Development Tools (Disabled in staging)
DEBUG_ENABLED=false
PROFILING_ENABLED=false
HOT_RELOAD_ENABLED=false
SOURCE_MAPS_ENABLED=false

# Testing
TEST_DATABASE_URL=${TEST_DATABASE_URL}
TEST_REDIS_URL=${TEST_REDIS_URL}

# External Services (Staging)
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}

# Analytics (Staging)
GOOGLE_ANALYTICS_ID=${GOOGLE_ANALYTICS_ID}
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
SENTRY_DSN=${SENTRY_DSN}

# Social Auth (Staging)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
FACEBOOK_APP_ID=${FACEBOOK_APP_ID}
FACEBOOK_APP_SECRET=${FACEBOOK_APP_SECRET}

# Storage (Staging - AWS S3)
STORAGE_TYPE=s3
STORAGE_LOCAL_PATH=./storage/staging
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION}
AWS_S3_BUCKET=${AWS_S3_BUCKET_STAGING}

# Cache Settings
CACHE_TTL_DEFAULT=3600
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_API_RESPONSE=300
CACHE_TTL_STATIC_DATA=604800

# Queue Settings (Staging)
QUEUE_REDIS_URL=${QUEUE_REDIS_URL}
QUEUE_CONCURRENCY=10
QUEUE_MAX_ATTEMPTS=5
QUEUE_BACKOFF_DELAY=5000

# Notification Settings
NOTIFICATION_CHANNELS=email,slack
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}

# SSL/TLS
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/staging.zapin.app.crt
SSL_KEY_PATH=/etc/ssl/private/staging.zapin.app.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificates.crt

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_REPORT_ONLY=false

# Performance
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
STATIC_CACHE_MAX_AGE=86400
API_CACHE_MAX_AGE=300

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}

# Monitoring
MONITORING_ENABLED=true
ALERT_EMAIL=${ALERT_EMAIL}
ALERT_SLACK_CHANNEL=${ALERT_SLACK_CHANNEL}
UPTIME_CHECK_INTERVAL=300

# Load Balancing
LOAD_BALANCER_ENABLED=true
STICKY_SESSIONS=false
SESSION_AFFINITY=false

# Scaling
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=2
MAX_INSTANCES=10
CPU_THRESHOLD=70
MEMORY_THRESHOLD=80

# Staging Specific
STAGING_RESET_SCHEDULE=0 0 * * 0
STAGING_DATA_RETENTION_DAYS=7
STAGING_MOCK_PAYMENTS=true
STAGING_BYPASS_EMAIL_VERIFICATION=false