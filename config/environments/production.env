# Production Environment Configuration
# This file contains production-specific environment variables
# All sensitive values should be replaced with actual secrets in production

# Application
NODE_ENV=production
APP_NAME=Zapin WhatsApp SaaS
APP_VERSION=1.0.0
APP_URL=https://zapin.app
API_URL=https://api.zapin.app
PORT=3000
API_PORT=3001

# Security (CRITICAL: Replace with actual secrets)
JWT_SECRET=${JWT_SECRET}
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
ENCRYPTION_KEY=${ENCRYPTION_KEY}
SESSION_SECRET=${SESSION_SECRET}

# Database (Production)
DATABASE_URL=${DATABASE_URL}
DATABASE_POOL_SIZE=50
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_IDLE_TIMEOUT=600000
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# Redis (Production)
REDIS_URL=${REDIS_URL}
REDIS_PASSWORD=${REDIS_PASSWORD}
REDIS_DB=0
REDIS_KEY_PREFIX=zapin:prod:
REDIS_CONNECTION_TIMEOUT=5000
REDIS_TLS_ENABLED=true
REDIS_CLUSTER_ENABLED=true

# Evolution API (Production)
EVOLUTION_API_URL=${EVOLUTION_API_URL}
EVOLUTION_API_KEY=${EVOLUTION_API_KEY}
EVOLUTION_API_TIMEOUT=30000
EVOLUTION_API_RETRY_ATTEMPTS=5
EVOLUTION_API_RETRY_DELAY=2000

# Logging (Production)
LOG_LEVEL=warn
LOG_FILE_ENABLED=true
LOG_CONSOLE_ENABLED=false
LOG_MAX_FILES=30
LOG_MAX_SIZE=100MB
LOG_COMPRESS=true

# Monitoring & Metrics (Production)
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true

# Rate Limiting (Strict in production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=500
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true
RATE_LIMIT_STORE=redis

# CORS (Restrictive in production)
CORS_ENABLED=true
CORS_ORIGIN=https://zapin.app,https://api.zapin.app
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# File Upload (Production limits)
UPLOAD_MAX_SIZE=50MB
UPLOAD_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,video/mp4,audio/mpeg
UPLOAD_DESTINATION=s3
UPLOAD_VIRUS_SCAN=true

# Email (Production - SendGrid/AWS SES)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_SECURE=true
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
EMAIL_FROM=noreply@zapin.app
EMAIL_FROM_NAME=Zapin
EMAIL_QUEUE_ENABLED=true

# Webhooks (Production)
WEBHOOK_SECRET=${WEBHOOK_SECRET}
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_ATTEMPTS=10
WEBHOOK_RETRY_BACKOFF=exponential

# Feature Flags (Production)
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_ANALYTICS=true
FEATURE_RATE_LIMITING=true
FEATURE_AUDIT_LOGGING=true

# Development Tools (Disabled in production)
DEBUG_ENABLED=false
PROFILING_ENABLED=false
HOT_RELOAD_ENABLED=false
SOURCE_MAPS_ENABLED=false

# External Services (Production)
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_WEBHOOK_TOLERANCE=300

# Analytics (Production)
GOOGLE_ANALYTICS_ID=${GOOGLE_ANALYTICS_ID}
MIXPANEL_TOKEN=${MIXPANEL_TOKEN}
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Social Auth (Production)
GOOGLE_CLIENT_ID=${GOOGLE_CLIENT_ID}
GOOGLE_CLIENT_SECRET=${GOOGLE_CLIENT_SECRET}
FACEBOOK_APP_ID=${FACEBOOK_APP_ID}
FACEBOOK_APP_SECRET=${FACEBOOK_APP_SECRET}

# Storage (Production - AWS S3)
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION}
AWS_S3_BUCKET=${AWS_S3_BUCKET_PRODUCTION}
AWS_CLOUDFRONT_DOMAIN=${AWS_CLOUDFRONT_DOMAIN}

# Cache Settings (Optimized for production)
CACHE_TTL_DEFAULT=7200
CACHE_TTL_USER_SESSION=86400
CACHE_TTL_API_RESPONSE=600
CACHE_TTL_STATIC_DATA=2592000
CACHE_COMPRESSION=true

# Queue Settings (Production)
QUEUE_REDIS_URL=${QUEUE_REDIS_URL}
QUEUE_CONCURRENCY=20
QUEUE_MAX_ATTEMPTS=10
QUEUE_BACKOFF_DELAY=10000
QUEUE_REMOVE_ON_COMPLETE=100
QUEUE_REMOVE_ON_FAIL=50

# Notification Settings (Production)
NOTIFICATION_CHANNELS=email,slack,webhook
SLACK_WEBHOOK_URL=${SLACK_WEBHOOK_URL}
DISCORD_WEBHOOK_URL=${DISCORD_WEBHOOK_URL}
PAGERDUTY_INTEGRATION_KEY=${PAGERDUTY_INTEGRATION_KEY}

# SSL/TLS (Production)
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/zapin.app.crt
SSL_KEY_PATH=/etc/ssl/private/zapin.app.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificates.crt
SSL_PROTOCOLS=TLSv1.2,TLSv1.3
SSL_CIPHERS=ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS

# Security Headers (Production)
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
CSP_ENABLED=true
CSP_REPORT_ONLY=false
CSP_REPORT_URI=https://api.zapin.app/csp-report
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin

# Performance (Production optimizations)
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=9
STATIC_CACHE_MAX_AGE=31536000
API_CACHE_MAX_AGE=3600
GZIP_ENABLED=true
BROTLI_ENABLED=true

# Backup (Production)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=90
BACKUP_S3_BUCKET=${BACKUP_S3_BUCKET}
BACKUP_ENCRYPTION=true
BACKUP_COMPRESSION=true

# Monitoring (Production)
MONITORING_ENABLED=true
ALERT_EMAIL=${ALERT_EMAIL}
ALERT_SLACK_CHANNEL=${ALERT_SLACK_CHANNEL}
UPTIME_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=10000
METRICS_RETENTION_DAYS=365

# Load Balancing (Production)
LOAD_BALANCER_ENABLED=true
STICKY_SESSIONS=false
SESSION_AFFINITY=false
LOAD_BALANCER_ALGORITHM=round_robin

# Scaling (Production)
AUTO_SCALING_ENABLED=true
MIN_INSTANCES=3
MAX_INSTANCES=50
CPU_THRESHOLD=60
MEMORY_THRESHOLD=70
SCALE_UP_COOLDOWN=300
SCALE_DOWN_COOLDOWN=600

# Database Scaling
DATABASE_READ_REPLICAS=3
DATABASE_CONNECTION_POOLING=true
DATABASE_QUERY_TIMEOUT=30000

# CDN (Production)
CDN_ENABLED=true
CDN_DOMAIN=${CDN_DOMAIN}
CDN_CACHE_TTL=86400

# API Versioning
API_VERSION=v1
API_DEPRECATION_WARNINGS=true
API_VERSION_HEADER=X-API-Version

# Audit & Compliance
AUDIT_LOGGING_ENABLED=true
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=2555
ANONYMIZATION_ENABLED=true

# Disaster Recovery
DR_ENABLED=true
DR_BACKUP_FREQUENCY=4h
DR_CROSS_REGION_REPLICATION=true
DR_RTO_MINUTES=60
DR_RPO_MINUTES=15

# Production Specific
PRODUCTION_MAINTENANCE_MODE=false
PRODUCTION_READ_ONLY_MODE=false
PRODUCTION_CIRCUIT_BREAKER=true
PRODUCTION_GRACEFUL_SHUTDOWN_TIMEOUT=30000